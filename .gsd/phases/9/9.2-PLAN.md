---
phase: 9
plan: 9.2
wave: 2
---

# Plan 9.2: Jira Connector OAuth2 Implementation

## Goal
Update the Jira connector to use OAuth2 tokens and implement token refresh logic.

## Tasks

<task type="auto">
  <name>Refactor JiraConnector for OAuth2</name>
  <files>backend/data/connectors/jira.py</files>
  <action>Update fetch_work_items and other methods to use Bearer authentication from credentials.</action>
  <verify>Check jira.py for the refactor.</verify>
  <done>Connector uses Bearer tokens.</done>
</task>

<task type="auto">
  <name>Implement Token Refresh logic</name>
  <files>backend/data/connectors/jira.py</files>
  <action>Add refresh_access_token() method and logic to trigger it if token is expired.</action>
  <verify>Check jira.py for the refresh method.</verify>
  <done>Token refresh logic implemented.</done>
</task>

<task type="auto">
  <name>Update sync task to handle refresh</name>
  <files>backend/data/tasks.py</files>
  <action>Implicitly or explicitly call refresh_access_token before data fetching.</action>
  <verify>Check tasks.py integration.</verify>
  <done>Sync task robustly handles token lifetimes.</done>
</task>

<task type="auto">
  <name>Empirical Verification (Phase 9)</name>
  <files>backend/data/management/commands/verify_phase_9.py</files>
  <action>Create a test command that simulates OAuth2 flow and verify success.</action>
  <verify>Run the command via docker-compose.</verify>
  <done>Phase 9 goal fully verified.</done>
</task>
