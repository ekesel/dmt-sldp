---
phase: 9
plan: 9.1
wave: 1
---

# Plan 9.1: Schema Evolution for Credentials

## Goal
Add a flexible `credentials` field to the `Integration` model to support OAuth2 tokens and other source-specific metadata.

## Tasks

<task type="auto">
  <name>Add credentials field to Integration</name>
  <files>backend/data/models.py</files>
  <action>Add credentials = models.JSONField(default=dict, blank=True) to the Integration class.</action>
  <verify>Check models.py for the new field.</verify>
  <done>Field is defined correctly.</done>
</task>

<task type="auto">
  <name>Update BaseConnector config mapping</name>
  <files>backend/data/connectors/base.py</files>
  <action>Update __init__ to include self.config['credentials'] = integration.credentials.</action>
  <verify>Check base.py for the update.</verify>
  <done>Config mapping includes credentials.</done>
</task>

<task type="auto">
  <name>Run Migrations</name>
  <files>backend/data/migrations/</files>
  <action>Run makemigrations and migrate via docker-compose.</action>
  <verify>Check if the column exists in the database.</verify>
  <done>Migrations applied successfully.</done>
</task>
