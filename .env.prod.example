# ------------------------------------------------------------------------------
# DMT-SLDP Production Environment configuration
# Copy this file to .env before running docker-compose in production
# `cp .env.prod.example .env`
# ------------------------------------------------------------------------------

# ==========================================
# Database Configuration
# ==========================================
DB_NAME=dmt_sldp_prod
DB_USER=dmt_db_user
# Use a highly secure, generated password
DB_PASSWORD=your_secure_postgres_password_here

# ==========================================
# Backend (Django) Configuration
# ==========================================
# MUST be a strong, randomly generated, unique secret key for production
DJANGO_SECRET_KEY=your_super_secret_and_long_django_key_here

# The base URL of the central admin portal (used for invitation links, etc.)
FRONTEND_URL=https://admin.yourdomain.com

# Allowed Hosts - Comma-separated list of backend domains and IP addresses
ALLOWED_HOSTS=api.yourdomain.com,localhost,backend

# CORS & CSRF - Domains that are allowed to make frontend requests to the backend
CORS_ALLOWED_ORIGINS=https://admin.yourdomain.com,https://app.yourdomain.com
CSRF_TRUSTED_ORIGINS=https://admin.yourdomain.com,https://app.yourdomain.com

# Tenant Domain Routing
# This is the suffix that all tenant subdomains will be attached to.
# E.g., if suffix is "yourdomain.com", tenant "acme-corp" will exist at "acme-corp.yourdomain.com"
TENANT_DOMAIN_SUFFIX=yourdomain.com


# ==========================================
# Frontend Configuration (Admin Portal)
# ==========================================
# API and WebSocket endpoints pointing to the production backend
NEXT_PUBLIC_ADMIN_API_URL=https://api.yourdomain.com/api/
NEXT_PUBLIC_WS_HOST=api.yourdomain.com
NEXT_PUBLIC_ADMIN_WS_URL=wss://api.yourdomain.com/ws/admin/health/
NEXT_PUBLIC_WS_TELEMETRY_URL_TEMPLATE=wss://api.yourdomain.com/ws/telemetry/{tenant_id}/

# Base URL used for constructing tenant portal links in the Admin UI
# Note: Use a leading dot to construct sibling domain addresses e.g., '.yourdomain.com'
NEXT_PUBLIC_COMPANY_PORTAL_BASE_URL=.yourdomain.com
NEXT_PUBLIC_COMPANY_PORTAL_PROTOCOL=https


# ==========================================
# Frontend Configuration (Company/Tenant Portal)
# ==========================================
# API endpoint for the tenant applications
NEXT_PUBLIC_APP_API_URL=https://api.yourdomain.com/api/

# Comma-separated list of domains that should NOT be treated as tenant slugs
# You want to include your root domains here so the middleware doesn't think "api" or "admin" is a tenant
NEXT_PUBLIC_DEV_DOMAINS=localhost,127.0.0.1,api.yourdomain.com,admin.yourdomain.com
